{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Butterfly chart of tornado percent by month for Australia vs America (2000-2024).",
  "data": {
    "url": "https://raw.githubusercontent.com/James-Monash/FIT3179_Assignment_2/main/tornado_month_percent_2000-2024_AUS_US.csv", 
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "calculate": "datum.country == 'Australia' ? -datum.percent : +datum.percent",
      "as": "signed_percent"
    }
  ],
  "width": 792,
  "height": 450,
  "mark": { "type": "bar", "cornerRadius": 2 },
  "encoding": {
    "y": {
      "field": "month_name",
      "type": "ordinal",
      "sort": ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
      "axis": {
        "title": "Month",
        "titleFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
        "labelFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
        "titleFontSize": 14,
        "labelFontSize": 12,
        "labelFontWeight": 600,
        "titleFontWeight": 600,
        "labelAlign": "right"
      }
    },
    "x": {
      "field": "signed_percent",
      "type": "quantitative",
      "scale": { "domain": [-25, 25] },
      "axis": {
        "title": "Percent of tornadoes (2000-2024)",
        "labelExpr": "datum.value === 0 ? '0%' : (round(abs(datum.value) * 10) / 10) + '%'",
        "titleFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
        "labelFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
        "titleFontSize": 14,
        "labelFontSize": 12,
        "labelFontWeight": 600,
        "titleFontWeight": 600
      }
    },
    "color": {
      "field": "country",
      "type": "nominal",
      "scale": {
        "domain": ["Australia", "America"],
        "range": ["#CC79A7", "#56B4E9"]
      },
      "legend": null
    },
    "tooltip": [
      { "field": "country", "type": "nominal", "title": "Country:" },
      { "field": "month_name", "type": "ordinal", "title": "Month:" },
      { "field": "count", "type": "quantitative", "title": "Count:" },
      { "field": "percent", "type": "quantitative", "title": "Percent:", "format": ".2f" }
    ]
  },
  "config": {
    "font": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
    "view": { "stroke": "transparent" },
    "axis": {
      "labelFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
      "titleFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
      "labelFontSize": 12,
      "labelFontWeight": 600,
      "titleFontSize": 14,
      "titleFontWeight": 600,
      "gridColor": "#e6e6e6",
      "gridWidth": 0.8,
      "tickSize": 4
    },
    "legend": {
      "labelFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
      "titleFont": "Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif",
      "labelFontSize": 12,
      "titleFontSize": 13
    }
  }
}
